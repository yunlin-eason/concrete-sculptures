---
import { aboutData } from '../data/site';

const base = import.meta.env.BASE_URL.replace(/\/?$/, '/');
const photoSrc = aboutData.photo.startsWith('/')
  ? `${base}${aboutData.photo.slice(1)}`
  : aboutData.photo;
---

<section id="about" class="py-20">
  <div class="container mx-auto max-w-5xl px-4">
    <h2 class="mb-12 text-center text-3xl font-bold tracking-tight">關於我</h2>
    <div class="grid gap-12 md:grid-cols-[300px_1fr]">
      <!-- Photo -->
      <div class="flex flex-col items-center gap-6">
        <div class="h-72 w-72 overflow-hidden rounded-2xl bg-muted">
          <img
            src={photoSrc}
            alt={aboutData.name}
            class="h-full w-full object-cover"
            loading="lazy"
          />
        </div>
        <h3 class="text-xl font-semibold">{aboutData.name}</h3>
      </div>

      <!-- Story & Contact -->
      <div class="flex flex-col justify-center gap-6">
        <div class="space-y-4 text-muted-foreground leading-relaxed">
          {aboutData.story.split('\n\n').map((paragraph) => (
            <p>{paragraph}</p>
          ))}
        </div>

        <!-- Contact -->
        <div class="flex flex-wrap gap-x-6 gap-y-2 text-sm">
          <a href={`mailto:${aboutData.email}`} class="inline-flex items-center gap-2 text-muted-foreground transition-colors hover:text-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
            {aboutData.email}
          </a>
        </div>

        <!-- Social -->
        <div class="flex gap-4">
          {aboutData.social.instagram && (
            <a href={aboutData.social.instagram} target="_blank" rel="noopener noreferrer" class="rounded-full p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-primary" aria-label="Instagram">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
            </a>
          )}
          {aboutData.social.threads && (
            <a href={aboutData.social.threads} target="_blank" rel="noopener noreferrer" class="rounded-full p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-primary" aria-label="Threads">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.59 12c.025 3.086.718 5.496 2.057 7.164 1.432 1.781 3.632 2.695 6.54 2.717 2.227-.017 4.048-.59 5.413-1.703 1.478-1.204 2.153-2.828 2.005-4.83-.092-1.233-.6-2.218-1.508-2.93-.876-.685-2.065-1.054-3.44-1.068-.946.003-1.813.196-2.58.573-.7.345-1.217.824-1.535 1.424-.309.583-.39 1.21-.24 1.865.233 1.012 1.092 1.82 2.302 2.164.895.254 1.836.225 2.646-.082 .538-.204.983-.52 1.323-.94l1.57 1.185c-.553.68-1.27 1.2-2.13 1.543-1.202.48-2.574.6-3.86.336-1.957-.4-3.47-1.74-3.93-3.48-.267-1.02-.2-2.063.197-3.018.414-.994 1.16-1.8 2.16-2.33 1.09-.578 2.336-.87 3.704-.87h.032c1.82.02 3.41.52 4.726 1.49 1.318 1.032 2.088 2.479 2.23 4.18.2 2.647-.776 4.858-2.9 6.587-1.774 1.445-4.065 2.19-6.81 2.215Z"/></svg>
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
</section>
